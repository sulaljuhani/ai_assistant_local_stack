# ==============================================================================
# AI Stack - Environment Configuration Template
# ==============================================================================
# üìã SETUP INSTRUCTIONS:
#   1. Copy this file: cp .env.example .env
#   2. Update all values marked with ‚ö†Ô∏è  REQUIRED
#   3. Review and customize optional settings
#   4. NEVER commit the .env file to version control
# ==============================================================================

# ------------------------------------------------------------------------------
# PostgreSQL Database Configuration
# ------------------------------------------------------------------------------
POSTGRES_HOST=postgres
POSTGRES_PORT=5432
POSTGRES_DB=aistack
POSTGRES_USER=aistack_user

# ‚ö†Ô∏è REQUIRED: Change this to a strong password!
# Use: openssl rand -base64 32
POSTGRES_PASSWORD=CHANGE_ME_TO_SECURE_PASSWORD

# PostgreSQL external port (for host access)
POSTGRES_EXTERNAL_PORT=5434

# ------------------------------------------------------------------------------
# Qdrant Vector Database Configuration
# ------------------------------------------------------------------------------
QDRANT_HOST=qdrant
QDRANT_PORT=6333
QDRANT_EXTERNAL_PORT=6333

# ------------------------------------------------------------------------------
# Redis Configuration
# ------------------------------------------------------------------------------
REDIS_HOST=redis
REDIS_PORT=6379
REDIS_EXTERNAL_PORT=6379

# ‚ö†Ô∏è RECOMMENDED: Set password for production
# REDIS_PASSWORD=CHANGE_ME_TO_SECURE_PASSWORD

# ------------------------------------------------------------------------------
# Ollama LLM Configuration
# ------------------------------------------------------------------------------
OLLAMA_HOST=ollama
OLLAMA_PORT=11434
OLLAMA_EXTERNAL_PORT=11434

# Models to pull on startup (comma-separated)
OLLAMA_MODELS=llama3.2:3b,nomic-embed-text

# ------------------------------------------------------------------------------
# n8n Workflow Automation Configuration
# ------------------------------------------------------------------------------
N8N_HOST=n8n
N8N_PORT=5678
N8N_EXTERNAL_PORT=5678
N8N_WEBHOOK_URL=http://n8n:5678/webhook

# ‚ö†Ô∏è RECOMMENDED: Enable basic auth for production
# N8N_BASIC_AUTH_ACTIVE=true
# N8N_BASIC_AUTH_USER=admin
# N8N_BASIC_AUTH_PASSWORD=CHANGE_ME_TO_SECURE_PASSWORD

# ------------------------------------------------------------------------------
# AnythingLLM Configuration
# ------------------------------------------------------------------------------
ANYTHINGLLM_HOST=anythingllm
ANYTHINGLLM_PORT=3001
ANYTHINGLLM_EXTERNAL_PORT=3001
ANYTHINGLLM_STORAGE=/mnt/user/appdata/anythingllm

# ‚ö†Ô∏è REQUIRED: Set JWT secret for production
# ANYTHINGLLM_JWT_SECRET=CHANGE_ME_TO_SECURE_JWT_SECRET

# ------------------------------------------------------------------------------
# MCP Server Configuration
# ------------------------------------------------------------------------------
MCP_SERVER_HOST=mcp-server
MCP_SERVER_PORT=8000
MCP_SERVER_EXTERNAL_PORT=8081

# ------------------------------------------------------------------------------
# OpenMemory Configuration
# ------------------------------------------------------------------------------
OPENMEMORY_HOST=openmemory-ai-stack
OPENMEMORY_PORT=8080
OPENMEMORY_EXTERNAL_PORT=8080
OPENMEMORY_URL=http://openmemory-ai-stack:8080

# ‚ö†Ô∏è OPTIONAL: Set API key for write operations (leave empty for local development)
# OPENMEMORY_API_KEY=

# OpenMemory will use the same PostgreSQL credentials
# It creates its own database called "openmemory"

# ------------------------------------------------------------------------------
# Embedding Configuration (Centralized)
# ------------------------------------------------------------------------------
# All services (n8n, OpenMemory, AnythingLLM) use these settings
EMBEDDING_MODEL=nomic-embed-text
EMBEDDING_DIMENSIONS=768
OLLAMA_URL=http://ollama-ai-stack:11434

# ------------------------------------------------------------------------------
# AI Stack Application Configuration
# ------------------------------------------------------------------------------

# Default user ID (single-user mode)
DEFAULT_USER_ID=00000000-0000-0000-0000-000000000001

# Timezone for scheduled tasks
TZ=UTC

# ------------------------------------------------------------------------------
# LangGraph Multi-Agent API Configuration
# ------------------------------------------------------------------------------

# API Server Configuration
API_HOST=0.0.0.0
API_PORT=8000
API_RELOAD=false

# CORS Configuration (comma-separated list of allowed origins)
# For production: https://yourdomain.com,https://app.yourdomain.com
# For development: http://localhost:3000,http://localhost:3001
CORS_ALLOWED_ORIGINS=http://localhost:3001

# LLM Provider: ollama or openai
LLM_PROVIDER=ollama

# State Management
STATE_PRUNING_ENABLED=true
STATE_MAX_MESSAGES=20
STATE_TTL_SECONDS=86400

# Logging Level: DEBUG, INFO, WARNING, ERROR, CRITICAL
LOG_LEVEL=INFO

# ------------------------------------------------------------------------------
# Docker Network Configuration
# ------------------------------------------------------------------------------
DOCKER_NETWORK=ai-stack-network

# ------------------------------------------------------------------------------
# Storage Paths (adjust for your system)
# ------------------------------------------------------------------------------
APPDATA_BASE=/mnt/user/appdata

POSTGRES_DATA=${APPDATA_BASE}/postgres
QDRANT_DATA=${APPDATA_BASE}/qdrant
REDIS_DATA=${APPDATA_BASE}/redis
OLLAMA_DATA=${APPDATA_BASE}/ollama
N8N_DATA=${APPDATA_BASE}/n8n
ANYTHINGLLM_DATA=${APPDATA_BASE}/anythingllm
MCP_SERVER_DATA=${APPDATA_BASE}/mcp-server
OPENMEMORY_DATA=${APPDATA_BASE}/openmemory

# Backup directory
BACKUP_PATH=/mnt/user/backups

# ------------------------------------------------------------------------------
# Obsidian Vault Configuration (Optional)
# ------------------------------------------------------------------------------
# VAULT_PATH=/path/to/your/ObsidianVault
# VAULT_SYNC_INTERVAL=12

# ------------------------------------------------------------------------------
# External Integration Configuration (Optional)
# ------------------------------------------------------------------------------

# Todoist API Token: https://todoist.com/prefs/integrations
# TODOIST_API_TOKEN=your_todoist_api_token_here

# Google Calendar OAuth: https://console.cloud.google.com/
# GOOGLE_CLIENT_ID=your_google_client_id
# GOOGLE_CLIENT_SECRET=your_google_client_secret
# GOOGLE_REFRESH_TOKEN=your_google_refresh_token

# Telegram Bot (for health check alerts)
# Get from: https://t.me/BotFather
# TELEGRAM_BOT_TOKEN=your_telegram_bot_token
# TELEGRAM_CHAT_ID=your_telegram_chat_id

# ------------------------------------------------------------------------------
# Performance & Limits
# ------------------------------------------------------------------------------
POSTGRES_MIN_POOL_SIZE=2
POSTGRES_MAX_POOL_SIZE=10
EMBEDDING_BATCH_SIZE=10
MEMORY_RETENTION_DAYS=365
CLEANUP_RETENTION_DAYS=90

# ------------------------------------------------------------------------------
# Logging Configuration
# ------------------------------------------------------------------------------
LOG_LEVEL=INFO
# DEBUG=false
# SQL_DEBUG=false

# ==============================================================================
# üîí SECURITY CHECKLIST
# ==============================================================================
# Before deploying to production:
#
# [ ] POSTGRES_PASSWORD - Use strong password (32+ chars)
# [ ] REDIS_PASSWORD - Enable and set strong password
# [ ] N8N_BASIC_AUTH - Enable and configure credentials
# [ ] ANYTHINGLLM_JWT_SECRET - Set random secret key
# [ ] Review all external ports for security
# [ ] Verify storage paths have correct permissions
# [ ] Update TZ to your local timezone
# [ ] Test database backups
# [ ] Enable firewall rules for exposed ports
# [ ] Review LOG_LEVEL for production (INFO or WARNING)
#
# ==============================================================================
